{% extends "base.html" %}

{% block content %}
<div class="container mt-5">
    <h2 class="text-center mb-4 text-primary">{{ place.name }}</h2>

    <div class="row">
        <div class="col-md-6">
            <img src="{{ place.image_url }}" alt="{{ place.name }}" class="img-fluid rounded-4">
        </div>
        <div class="col-md-6">
            <p><strong>Location:</strong> {{ place.location }}</p>
            <p><strong>Description:</strong> {{ place.description }}</p>
            <p><strong>Price:</strong> ${{ place.price_per_night }} per night</p>
        </div>
    </div>

    <h3 class="mt-4 text-success">Make a Booking</h3>

    {% if 'user_id' not in session %}
        <div class="alert alert-warning" role="alert">
            You need to log in to make a booking.
        </div>
        <a href="{{ url_for('login') }}" class="btn btn-primary">Log in</a>
    {% else %}
        <form method="POST">
            <div class="mb-3">
                <label for="hotel_name" class="form-label">Hotel Name</label>
                <input type="text" class="form-control" id="hotel_name" name="hotel_name" required>
            </div>

            <div class="mb-3">
                <label for="room_size" class="form-label">Room Size</label>
                <input type="text" class="form-control" id="room_size" name="room_size" required>
            </div>

            <div class="mb-3">
                <label for="num_persons" class="form-label">Number of Persons</label>
                <input type="number" class="form-control" id="num_persons" name="num_persons" required>
            </div>

            <div class="mb-3">
                <label for="in_date" class="form-label">Check-in Date</label>
                <input type="date" class="form-control" id="in_date" name="in_date" required>
            </div>

            <div class="mb-3">
                <label for="out_date" class="form-label">Check-out Date</label>
                <input type="date" class="form-control" id="out_date" name="out_date" required>
            </div>

            <div class="mb-3">
                <label for="special_requests" class="form-label">Special Requests</label>
                <select class="form-control" id="special_requests" name="special_requests">
                    <option value="None">None</option>
                    <option value="Other">Other</option>
                </select>
            </div>

            <div class="mb-3" id="other_request_div" style="display:none;">
                <label for="other_request" class="form-label">Other Request</label>
                <input type="text" class="form-control" id="other_request" name="other_request">
            </div>

            <button type="submit" class="btn btn-success">Confirm Booking</button>
        </form>
    {% endif %}

</div>

<script>
    // Show/hide "Other Request" field based on selection
    document.getElementById("special_requests").addEventListener("change", function() {
        var otherRequestDiv = document.getElementById("other_request_div");
        if (this.value === "Other") {
            otherRequestDiv.style.display = "block";
        } else {
            otherRequestDiv.style.display = "none";
        }
    });
</script>
{% endblock %}
